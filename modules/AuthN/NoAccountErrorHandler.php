<?php

/**
 * Handles the case when someone attempts to login with a nonexistent account.
 * There are three different cases of interest here:
 * 
 * 1. The user is authenticated by Shibboleth (or another remote identity
 *    provider) and has a Syllabus account, but their Syllabus account's username
 *    equals their e-mail address rather than the username returned by 
 *    Shibboleth. We fix the acocunt's username and log them in seamlessly.
 * 
 * 2. The user is authenticated but they do not have a Syllabus account with a
 *    username that matches either their Shibboleth username or e-mail
 *    address. It's still possible that the person has a Syllabus account under a
 *    different e-mail address, but we deal with these mismatches through 
 *    manual intervention. If the user is of the appropriate role, they should
 *    be allowed to create a new account. If the user is enrolled as an instructor
 *    via ClassData, give them Faculty Role and add them as members to any
 *    departments and colleges that they should be associated with.
 * 
 * 3. The user is unauthenticated and no account could be found. This generally
 *    occurs because the user entered the wrong username (e-mail address) for
 *    the internal password authentication scheme. We treat this the same as
 *    Bss_AuthN_ExLoginRequired.
 * 
 * @author      Daniel A. Koepke (dkoepke@sfsu.edu)
 * @author      Steve Pedersen (pedersen@sfsu.edu)
 * @copyright   Copyright &copy; San Francisco State University.
 */
class Syllabus_AuthN_NoAccountErrorHandler extends Syllabus_Master_ErrorHandler
{
    public static function getErrorClassList () { return array('Bss_AuthN_ExNoAccount'); }
    
    private $pageTitle;
    
    protected function getStatusCode () { return 403; }
    protected function getStatusMessage () { return 'Forbidden'; }
    protected function getTemplateFile () { return 'error-login.html.tpl'; }
    
    protected function handleError ($error)
    {
        parent::handleError($error);
        
        $identity = $error->getExtraInfo();
        $provider = $identity->getIdentityProvider();
        $accountManager = new Syllabus_ClassData_AccountManager($this->getApplication());
        
        // TODO: Remove this temporary hack to spoof authentication for dev
        // NOTE: choose dev idp, enter in whatever for username/pass, 
        // it will generate 400+ faculty accounts to be used. Don't repeat.
        if (get_class($provider) === 'Syllabus_AuthN_DevIdentityProvider')
        {
            set_time_limit(0);
            ini_set('memory_limit', '-1');
            foreach ($this->dummydata as $user)
            {
                $identity->setAuthenticated(true);
                $identity->setProperty('username', $user);
                $identity->setProperty('allowCreateAccount', true);
                if ($identity->getAuthenticated())
                {
                    if (($username = $identity->getProperty('username')))
                    {
                        $accounts = $this->schema('Bss_AuthN_Account');
                        $account = $accounts->findOne($accounts->username->lower()->equals(strtolower($username)));
                        
                        if ($account)
                        {
                            $account->username = $identity->getProperty('username');
                            // $this->getUserContext()->login($account);
                        }
                    }
                    if (($allowCreateAccount = $identity->getProperty('allowCreateAccount')))
                    {
                        $accountManager = new Syllabus_ClassData_AccountManager($this->getApplication());
                        $account = $accountManager->createUserAccount($identity);
                        
                        // $this->getUserContext()->login($account);
                        // $this->response->redirect('home');
                    }
                    else
                    {
                        $this->template->setPageTitle('Account creation disallowed');
                    }
                    
                    $this->template->identity = $identity;
                    $this->template->allowCreateAccount = $allowCreateAccount;
                }           
            }

        }
        elseif ($identity->getAuthenticated())
        // if ($identity->getAuthenticated())
        {
            // We know the user's identity for sure, but we couldn't find an
            // account for them. This only happens for Shibboleth, LDAP, and
            // similar remote authentication systems, where we can verify
            // the person's identity independent of knowing that they own a
            // particular Syllabus account.
            
            // This situation can occur if the person doesn't have a Syllabus
            // account at all, or if they have an older account where the
            // username is their e-mail address.
            
            if (($username = $identity->getProperty('username')))
            {
                $accounts = $this->schema('Bss_AuthN_Account');
                $account = $accounts->findOne($accounts->username->lower()->equals(strtolower($username)));
                
                if ($account)
                {
                    // The user has an account with username equal to their
                    // e-mail address. We trust that the identity provider
                    // requires the person to prove they own whatever e-mail
                    // address that is being reported to us. (In general,
                    // this is a dangerous assumption, but we can vet that
                    // with our identity providers.)
                    
                    // If we didn't trust them, we'd have to send an e-mail
                    // out to the user with a link to initiate the migration.
                    // Let's go with this for right now.
                    
                    // NOTE: login() is guaranteed to save the account.
                    
                    $account->username = $identity->getProperty('username');
                    $this->getUserContext()->login($account);
                }
            }
            elseif ($accountManager->hasEnrollment($identity))
            {
                $identity->setProperty('allowCreateAccount', true);
            }
            
            if (($allowCreateAccount = $identity->getProperty('allowCreateAccount')))
            {
                $account = $accountManager->createUserAccount($identity);
                
                $this->getUserContext()->login($account);
                // $this->response->redirect('home');
            }
            else
            {
                $this->template->setPageTitle('Account creation disallowed');
            }
            
            $this->template->identity = $identity;
            $this->template->allowCreateAccount = $allowCreateAccount;
        }
        else
        {
            // Treat it the same as if they had an account but failed to
            // authenticate, which is probably due to them entering the
            // wrong username for the internal password authentication
            // scheme.
            
            $this->forwardError('Bss_AuthN_ExLoginRequired', $error);
        }
    }
    
    private function getAffiliations ($identity)
    {
        if (($affiliationList = $identity->getProperty('affiliation', [])))
        {
            if (is_string($affiliationList))
            {
                $affiliationList = explode(';', $affiliationList);
            }
            
            $affiliationList = array_map(array($this, 'normalizeAffiliation'), $affiliationList);
        }
        
        return $affiliationList;
    }
    
    protected function normalizeAffiliation ($affiliation)
    {
        return strtolower(trim($affiliation));
    }
    
    private function guessUniversity ($identity, $provider)
    {
        $universities = $this->schema('Bss_Academia_University');
        $condList = [];
        
        // If we have an organization from Shibboleth, see if it matches the
        // university abbreviation.
        if (($org = $identity->getProperty('organization')))
        {
            $condList[] = $universities->abbreviation->lower()->equals(strtolower($org));
        }
        
        $providerName = strtolower(preg_replace('/^([^-]+)-shib$/', '\\1', $provider->getName()));
        $condList[] = $universities->abbreviation->lower()->equals($providerName);
        
        $providerTitle = strtolower($provider->getDisplayName());
        $condList[] = $universities->name->lower()->equals($providerTitle);
        
        return $universities->findOne($universities->anyTrue($condList));
    }


// psql syllabus -c "COPY (SELECT DISTINCT(user_id) FROM syllabus_classdata_enrollments where role = 'instructor') TO STDOUT (format csv, delimiter ';')"  > instructor-enrollments.csv
private $dummydata = [
'912575695',
'900000483',
'911398493',
'918830723',
'909163299',
'918830216',
'900022310',
'912943608',
'913077300',
'903538784',
'916431170',
'910609588',
'910435908',
'909142863',
'912299705',
'901518077',
'900003317',
'900015212',
'917255552',
'900006619',
'918832842',
'917182843',
'918115697',
'909169383',
'909163273',
'916425411',
'900037676',
'900007139',
'900012924',
'909292597',
'903794884',
'910631259',
'916502202',
'917950753',
'918825731',
'900024975',
'913716666',
'916406951',
'916479790',
'900004669',
'917871804',
'918828266',
'918103113',
'900002186',
'910576568',
'900008582',
'907384821',
'902756964',
'909169123',
'909323797',
'906473170',
'909175948',
'918830983',
'900020334',
'909803445',
'900362910',
'903901653',
'918119649',
'917243150',
'900048401',
'900013379',
'916448980',
'901122578',
'913869234',
'913136476',
'909180381',
'900015823',
'918765931',
'909891468',
'905877419',
'900017994',
'900014731',
'909161505',
'911786127',
'908460571',
'916478074',
'905495453',
'920121251',
'900007113',
'918828526',
'905646383',
'900053679',
'900044111',
'917196883',
'918818334',
'900021140',
'917930434',
'908481137',
'906411394',
'900003343',
'916127516',
'900032671',
'909204002',
'903918488',
'909811245',
'908529887',
'903472029',
'911982427',
'912978422',
'917256176',
'907057377',
'911645506',
'917243059',
'903650337',
'900001003',
'902393978',
'915376324',
'918828916',
'918797755',
'916432314',
'913836591',
'917204917',
'917928848',
'909923721',
'911942595',
'900004955',
'918826589',
'900036311',
'900035349',
'905091153',
'911474218',
'903907048',
'900030032',
'909919483',
'900012755',
'915061464',
'900474060',
'910507122',
'902509119',
'900038209',
'900044085',
'908428474',
'907641610',
'900050767',
'917949752',
'917180776',
'900033386',
'900022414',
'911838335',
'918116178',
'900006151',
'900012495',
'900015485',
'907529641',
'918818256',
'916502384',
'900010168',
'902771381',
'900043773',
'912214646',
'912153715',
'917179814',
'909169136',
'900070540',
'900024195',
'903104571',
'910609965',
'907393245',
'901083812',
'911239477',
'917266888',
'904980679',
'908723522',
'913757356',
'900001107',
'900601343',
'918803826',
'918805919',
'918828838',
'913725805',
'903881828',
'918823599',
'900016473',
'907603858',
'918830164',
'900031618',
'901639185',
'900045853',
'900041108',
'909181174',
'918823417',
'900001185',
'901066327',
'901073074',
'909198113',
'917915081',
'918828760',
'900035427',
'918673111',
'916401595',
'917197091',
'900013041',
'900043578',
'915550303',
'918114774',
'910965645',
'917230475',
'917242344',
'904033551',
'918827733',
'900040744',
'908389123',
'920010517',
'909198074',
'900049792',
'900007217',
'918823274',
'915763282',
'900019255',
'900044605',
'901228476',
'909161765',
'905344237',
'905072498',
'908456905',
'917931539',
'905639480',
'900002836',
'918830905',
'918113487',
'900044826',
'918827915',
'917967146',
'903595152',
'917921607',
'912439624',
'913868129',
'900028329',
'909486973',
'903783977',
'900007178',
'917158819',
'900046672',
'917179489',
'909163351',
'911136075',
'918825445',
'900005878',
'900031696',
'900051950',
'906566796',
'910625981',
'918831126',
'913859315',
'908170463',
'900045619',
'912951694',
'900039366',
'913062116',
'920008593',
'910037419',
'908339164',
'913728132',
'911383868',
'900011962',
'904622178',
'904234037',
'907085106',
'912214256',
'918117712',
'900040003',
'917292043',
'912936068',
'912207392',
'918829059',
'917265848',
'900009661',
'910624564',
'912980983',
'918103360',
'901537850',
'900018215',
'907597514',
'917255188',
'917185053',
'909862855',
'917248701',
'918830892',
'913768497',
'900008426',
'900001042',
'918104608',
'918499366',
'917273726',
'900008556',
'917207530',
'901377677',
'900030903',
'913751948',
'916482637',
'908411366',
'913785735',
'915385970',
'907006768',
'911630712',
'913680162',
'904421185',
'917941289',
'917268136',
'909906314',
'911236656',
'918119740',
'904451904',
'917179372',
'906096248',
'917920229',
'900022648',
'918829553',
'900021114',
'915572169',
'900040978',
'917163772',
'909133386',
'909898579',
'900019151',
'907017103',
'909355725',
'900016499',
'918524248',
'907255679',
'913800529',
'909231276',
'900399466',
'910443357',
'918828292',
'910763053',
'909441811',
'907608798',
'910678579',
'913869416',
'913828674',
'904647684',
'913678576',
'905332498',
'910837751',
'918074292',
'900045983',
'909217834',
'913869988',
'912817092',
'917966041',
'917924870',
'900030552',
'913729978',
'917936297',
'907332340',
'901758252',
'913717680',
'909009756',
'916742156',
'900002082',
'900054251',
'918117660',
'913200969',
'915768612',
'912978604',
'900043162',
'906355559',
'913857911',
'900016616',
'901466649',
'918830801',
'900049779',
'900006086',
'903383421',
'916430520',
'916401426',
'903524029',
'911333454',
'909035353',
'917945644',
'908135116',
'900018592',
'918824990',
'910121828',
'916449994',
'907056168',
'900014783',
'908073626',
'907121961',
'900019788',
'911204299',
'900007724',
'909032246',
'900041654',
'917255851',
'900009115',
'909127614',
'917248610',
'900042551',
'917929212',
'915152750',
'918360474',
'900008452',
'913838463',
'900399297',
'913176035',
'918830229',
'917932033',
'918827824',
'918829202',
'916404624',
'900021998',
'900350495',
'913847420',
'909957456',
'918110237',
'900045762',
'913571001',
'918831256',
'900028316',
'916421979',
'906280055',
'900019736',
'900015108',
'911254973',
'900016174',
'900033204',
'908312202',
'917938468',
'915586287',
'903345955',
'918118778',
'917223546',
'900029694',
'917203656',
'900014055',
'917241681',
'900572431',
'900009063',
'909471932',
'911040824',
'918830840',
'903879098',
'917324387',
'902449995',
'906216641',
'911800518',
'906996784',
'918812978',
'903352624',
'902296504',
'913538007',
'912993814',
'917303119',
'918826914',
'905451617',
'900032008',
'900005397',
'910467147',
'906408430',
'900005319',
'918831347',
'909169253',
'900041836',
'913797214',
'901022595',
'905826745',
'912936016',
'900011806',
'900015524',
'918112356',
'913828596',
'903725308',
'900004825',
'910835697',
'917232789',
'918828149',
'906533594',
'900001913',
'912374494',
'913823487',
'912806198',
'900017916',
'900012547',
'913250902',
'916468441',
'916479400',
'913824020',
'905910959',
'913062493',
'900616982',
'913822577',
'904417987',
'917925091',
'900003720',
'900061284',
'917172261',
'917904811',
'909275697',
'900019684',
'900014172',
'900280360',
'916404962',
'911349236',
'913684764',
'911215765',
'918499353',
'908496477',
'918832296',
'917932319',
'918117621',
'900027874',
'900014354',
'909861191',
'917175368',
'912141768',
'917926963',
'900011000',
'918828617',
'900007009',
'918828981',
'917260102',
'900023168',
'917185313',
'916478035',
'918829189',
'918123289',
'900012040',
'900001835',
'908206499',
'909965828',
'910657571',
'917223962',
'906993196',
'917921594',
'917180607',
'900036038',
'918826459',
'913727729',
'913765351',
'910482916',
'912934963',
'909168824',
'918828513',
'913748685',
'911220471',
'917167503',
'900001146',
'913234548',
'903044355',
'900016317',
'904849457',
'900017019',
'916481506',
'918830853',
'900037533',
'918827577',
'903337310',
'901830610',
'909918183',
'900025937',
'918298672',
'916474421',
'901414363',
'901848901',
'916473160',
'911351953',
'900028849',
'900001874',
'900000197',
'902557739',
'916488968',
'902476632',
'900046165',
'913829493',
'912760815',
'916437917',
'904547350',
'900067914',
'917215135',
'909929311',
'904744638',
'911479925',
'907438212',
'906574479',
'900017825',
'917261233',
'902083668',
'912670829',
'907874453',
'900024468',
'900015836',
'908468943',
'900015160',
'908504797',
'911407775',
'911987354',
'917937779',
'907608902',
'900046841',
'917243215',
'917216539',
'918119766',
'910626033',
'900004136',
'909759518',
'918829969',
'917253199',
'911239321',
'913812333',
'917177851',
'906277117',
'900038625',
'900657893',
'918825497',
'913136541',
'900027328',
'909169201',
'900022960',
'912975029',
'909638176',
'900113661',
'915268567',
'900036298',
'909211724',
'918825250',
'900024962',
'918292484',
'903031784',
'918101865',
'912603528',
'900000704',
'917897960',
'903746264',
'903508806',
'916481571',
'908801522',
'902012337',
'918361150',
'913867934',
'900017149',
'918818347',
'912117081',
'909169188',
'907144412',
'900054719',
'918827629',
'907608564',
'900006398',
'902558376',
'908388759',
'900039691',
'908561672',
'910598681',
'900040705',
'913864359',
'917922478',
'900038092',
'917037984',
'908509685',
'908372340',
'913002225',
'900001939',
'904081729',
'903914367',
'917197650',
'917187614',
'910630479',
'918055702',
'904255045',
'900024273',
'913764428',
'911265581',
'905388073',
'903897493',
'903047917',
'918073928',
'917248662',
'918811847',
'913799021',
'916414088',
'900012352',
'918114930',
'913752884',
'900014159',
'904521012',
'904070653',
'918831659',
'913869429',
'900063871',
'908492187',
'902096785',
'900034998',
'900000769',
'918825939',
'920005837',
'900011442',
'901409592',
'900006996',
'900016031',
'915516997',
'918831191',
'908406920',
'909150325',
'900857053',
'917225340',
'917956928',
'904370082',
'900041940',
'900009219',
'918767244',
'907771077',
'918142126',
'904386865',
'900046139',
'901063220',
'918522688',
'908989697',
'910656505',
'918239457',
'900057410',
'917948491',
'917263443',
'911940437',
'901386166',
'909169344',
'904208830',
'900074713',
'900012690',
'917930265',
'909180849',
'916476865',
'916485952',
'916406483',
'900002875',
'900032320',
'900023805',
'900042668',
'912748426',
'905306316',
'913840998',
'915580060',
'918828747',
'918293056',
'918830294',
'901768353',
'913281946',
'900020724',
'904086799',
'900005527',
'903261884',
'900003044',
'917259257',
'915598286',
'900008803',
'916396915',
'905851432',
'900044917',
'904212782',
'913870092',
'900014133',
'917241408',
'918119168',
'918120611',
'913781276',
'900328720',
'909861620',
'915228202',
'918121716',
'913155183',
'918065868',
'909927335',
'918830944',
'902408395',
'918119753',
'917241187',
'916480310',
'917201160',
'913768627',
'908491992',
'915611260',
'900011533',
'900005696',
'903970020',
'900010220',
'917241668',
'900010441',
'918825094',
'920021697',
'911626786',
'900004578',
'916538550',
'907272410',
'917236429',
'907903664',
'900020386',
'912511397',
'909766486',
'907717647',
'916426256',
'918825354',
'900031150',
'917177175',
'917951819',
'909070076',
'904746211',
'918826472',
'900010363',
'901213812',
'900015433',
'918825341',
'918292146',
'903420536',
'910382868',
'918119077',
'900019801',
'917946411',
'911611498',
'918828604',
'906989478',
'900035843',
'900002446',
'904066129',
'908379295',
'917897141',
'900065990',
'917213627',
'904497963',
'916428687',
'909400484',
'904438826',
'916504698',
'900007165',
'901676508',
'900009401',
'910461752',
'900027718',
'916405495',
'900035856',
'900046997',
'917213653',
'900031202',
'904877953',
'900031514',
'904717429',
'903151163',
'907896059',
'908518642',
'918828903',
'912350106',
'905007602',
'900028628',
'915596713',
'904564822',
'902603226',
'918100955',
'900022843',
'901748593',
'913006125',
'906011059',
'904859987',
'900438843',
'917925156',
'918103997',
'915405353',
'913823760',
'905502902',
'909863934',
'905377270',
'901610000',
'904874768',
'917937298',
'900024403',
'918672591',
'917214862',
'912957856',
'912376106',
'917203643',
'900027991',
'900004318',
'913699051',
'911688107',
'902967798',
'900015173',
'904660268',
'900007633',
'912810878',
'900009206',
'907608876',
'916449877',
'915607867',
'918825471',
'915448266',
'901902084',
'902882908',
'918831581',
'918668522',
'902366275',
'908491810',
'916665248',
'902150358',
'913823461',
'918828734',
'913753794',
'901615733',
'903581658',
'917969057',
'900072022',
'910672911',
'908850610',
'910648809',
'912806159',
'900000574',
'905126708',
'918121482',
'900021959',
'904519673',
'909895264',
'905349866',
'918827772',
'918063944',
'900036597',
'918828188',
'918106441',
'909749677',
'910507655',
'900000249',
'916444170',
'900002004',
'918831477',
'900023220',
'912082033',
'906530331',
'909142798',
'908491901',
'918767478',
'901695020',
'904891434',
'918826121',
'910915621',
'912725546',
'908557499',
'907608980',
'909876011',
'900026288',
'906350489',
'900007477',
'917208791',
'900009687',
'918826966',
'917131207',
'902032760',
'900009167',
'913828583',
'912229596',
'913839360',
'912996037',
'909169058',
'912931323',
'909912164',
'913766625',
'908541951',
'908439407',
'911308819',
'908338332',
'906918134',
'905062527',
'900021517',
'917158572',
'913223095',
'918811808',
'917934568',
'908472141',
'915633594',
'911869522',
'906495374',
'906411446',
'900011039',
'918823261',
'900013184',
'900038027',
'910589178',
'907599984',
'910605779',
'909957157',
'918117647',
'909906327',
'906993066',
'900029278',
'918830957',
'908492174',
'917223455',
'900000808',
'900038898',
'900006658',
'900010532',
'901333659',
'907319275',
'916604460',
'900020737',
'916474148',
'900030539',
'900394877',
'908477016',
'909796815',
'915033865',
'909934810',
'918106090',
'918101722',
'901110709',
'918825432',
'918106454',
'900047634',
'907899023',
'905800108',
'918103165',
'900051664',
'900183861',
'917929992',
'900006697',
'904964455',
'905200743',
'906232501',
'916402856',
'918825159',
'917224846',
'906207684',
'906993053',
'909503444',
'901183990',
'900014640',
'904256618',
'909169318',
'904763904',
'918113864',
'901640082',
'901171445',
'900052236',
'900017448',
'900026730',
'900039639',
'911780472',
'900034881',
'909638358',
'912980255',
'900006034',
'912980788',
'900003200',
'907620147',
'900004864',
'909902102',
'901044136',
'916401374',
'907607615',
'908497608',
'917246842',
'918828084',
'918119792',
'900038248',
'906992962',
'900008335',
'907142579',
'918831100',
'912258794',
'907961371',
'918114371',
'915574028',
'906461418',
'908455553',
'900003655',
'904747017',
'918827538',
'918828435',
'918544723',
'916479803',
'900040926',
'918103100',
'916477268',
'918119844',
'900030838',
'903948102',
'910300786',
'910437962',
'900003928',
'909057531',
'900048752',
'910357713',
'900003460',
'918826069',
'908504823',
'918825120',
'913023025',
'900039483',
'912204350',
'916467726',
'916474642',
'900011585',
'909000656',
'910721297',
'900576929',
'907608499',
'911551607',
'903698567',
'918117764',
'909931001',
'917190214',
'920010465',
'900004890',
'913285885',
'901516816',
'917222818',
'900040562',
'910627866',
'917302443',
'917253459',
'903413464',
'908484751',
'913867674',
'912972078',
'918108248',
'912228348',
'906533763',
'918810586',
'900036636',
'916431573',
'900012885',
'900025911',
'900064846',
'912375300',
'900013223',
'912142210',
'918806361',
'909128043',
'911228986',
'913841011',
'900049181',
'902883376',
'912001030',
'900009713',
'909169097',
'911445189',
'908578494',
'900024000',
'900003941',
'918830710',
'903469650',
'909907575',
'918117283',
'916499095',
'917919995',
'900042928',
'917248311',
'917173197',
'916488929',
'912165935',
'900027120',
'918523975',
'900003629',
'917242500',
'900003304',
'900025508',
'918831048',
'900026847',
'907897775',
'909893392',
'917261532',
'902933465',
'900032918',
'900038573',
'906993443',
'900076520',
'900051495',
'916472744',
'916402284',
'916434927',
'918827863',
'901790713',
'900168430',
'900003824',
'904129413',
'913295024',
'917197663',
'918522623',
'900009024',
'907608863',
'900007360',
'910766771',
'912539594',
'900003148',
'917923466',
'916485718',
'913869897',
'912129990',
'911251762',
'900005904',
'915309023',
'906763876',
'918104556',
'900520457',
'902216450',
'902442988',
'908358599',
'909232511',
'912828324',
'918826134',
'900026912',
'918826485',
'917230319',
'900027159',
'900035531',
'915362791',
'908513416',
'912823514',
'909802600',
'900034920',
'918826199',
'900020776',
'912739924',
'918826277',
'918118687',
'900023857',
'901148396',
'905019120',
'900011598',
'909562542',
'913664601',
'901583701',
'917242188',
'909889349',
'917226679',
'909898189',
'900041160',
'918522831',
'917930616',
'900009089',
'916478815',
'918810690',
'915162188',
'916428453',
'900000106',
'908397196',
'913734710',
'900017656',
'900051768',
'913857898',
'909146490',
'908469242',
'907979467',
'917923557',
'900006424',
'918101891',
'900038352',
'908526169',
'900035635',
'900021790',
'907441085',
'900710738',
'900006099',
'918111056',
'900012612',
'916406925',
'918821870',
'917921061',
'913664952',
'900271988',
'908369831',
'900065145',
'913746878',
'900021465',
'916506076',
'902628810',
'900934247',
'909176871',
'900011793',
'907609435',
'910675303',
'913672817',
'900005774',
'901528763',
'917230332',
'900001523',
'913722685',
'900012131',
'903166841',
'906166279',
'905044808',
'903664468',
'917187588',
'913652108',
'900038222',
'917265458',
'900002121',
'911966333',
'900585041',
'900039951',
'904440880',
'900046750',
'900029044',
'918828058',
'913765208',
'901196704',
'909524556',
'900050598',
'912816910',
'913529752',
'916499251',
'900018930',
'900002433',
'912953670',
'918121430',
'903171066',
'917241291',
'913156951',
'918108742',
'908492005',
'916420796',
'917229110',
'907490173',
'907272462',
'917075346',
'918828864',
'910731710',
'904588742',
'901647791',
'910649147',
'902186147',
'900011052',
'900041329',
'904439320',
'900029187',
'918831113',
'918830788',
'909176858',
'909216482',
'918117257',
'900022206',
'916401556',
'909965516',
'907556512',
'900029720',
'900041173',
'900027003',
'900047712',
'907935046',
'909906548',
'909226466',
'900013171',
'900041849',
'918121625',
'912721971',
'901361804',
'918668340',
'907563324',
'907268809',
'912152883',
'915599638',
'912188217',
'918170349',
'900055707',
'908174363',
'900047127',
'916491971',
'918825406',
'908492161',
'900051209',
'909156799',
'915768703',
'918828656',
'910606832',
'917177825',
'917939196',
'912031203',
'900001276',
'916497938',
'917385201',
'911527609',
'918830632',
'917661165',
'900015498',
'909085949',
'902863915',
'900024013',
'917936427',
'905152045',
'900033971',
'918827434',
'900001458',
'907575466',
'917264054',
'900010987',
'912930504',
'918827265',
'918827837',
'900029252',
'900663886',
'918108807',
'913867622',
'900040510',
'912953657',
'900027913',
'901455560',
'909226453',
'905387124',
'900045658',
'900038859',
'905787095',
'917237092',
'909158047',
'900030357',
'904778581',
'916406171',
'916418378',
'902773799',
'918162679',
'913782654',
'900006372',
'913010324',
'918826888',
'918827122',
'916285648',
'918110185',
'900008491',
'900006411',
'917300701',
'912159396',
'918802513',
'918107650',
'907022680',
'913852074',
'900050442',
'917241473',
'900000418',
'907609019',
'904486120',
'920021710',
'918061539',
'909899996',
'915622622',
'912707944',
'906733014',
'910936460',
'904045173',
'917204501',
'916428115',
'911147372',
'900049727',
'902010725',
'916449409',
'917241330',
'918825419',
'909171385',
'900007022',
'900004227',
'918634085',
'908484205',
'916490853',
'918828474',
'913860004',
'917248207',
'917935673',
'916450592',
'900052483',
'908517823',
'908486883',
'920020826',
'905185260',
'910654997',
'920036153',
'909169071',
'900004292',
'918116646',
'902847704',
'918116568',
'900033555',
'900032567',
'905323229',
'917199795',
'913177491',
'900009414',
'912971740',
'918830749',
'916414985',
'915610649',
'918817996',
'902650091',
'913707644',
'904534389',
'901513865',
'912792236',
'917179541',
'908046690',
'913556662',
'907609045',
'900001575',
'915141544',
'906129931',
'903763073',
'908501378',
'910231808',
'900001796',
'900050377',
'900006177',
'909771543',
'908491836',
'907475860',
'917176746',
'908581549',
'918103087',
'913767236',
'918831217',
'913780171',
'912552672',
'917175693',
'909169162',
'918110003',
'911333103',
'901500254',
'917921477',
'900020789',
'900987456',
'910598434',
'918828929',
'912953605',
'908492564',
'913759774',
'900014718',
'900041264',
'907044910',
'918102567',
'910910395',
'913733709',
'918162575',
'900034257',
'900035726',
'912032659',
'918825484',
'900008127',
'918120312',
'910347690',
'900011845',
'908345196',
'900726637',
'917247674',
'913746917',
'901469093',
'900049883',
'900004552',
'913841297',
'900013509',
'903044628',
'909162155',
'900063390',
'900018241',
'918827902',
'911419423',
'916480063',
'917948426',
'913694033',
'918120936',
'900025859',
'900036168',
'900003551',
'913868025',
'900049610',
'918828227',
'913867596',
'916410903',
'907328700',
'913673168',
'918831438',
'917347267',
'902977002',
'917177045',
'918115775',
'902397891',
'907539989',
'909729085',
'901978797',
'908148493',
'918116672',
'916545661',
'916417702',
'917227316',
'900019892',
'916440127',
'904007668',
'913593673',
'918828071',
'918823365',
'918826667',
'916477996',
'918827512',
'913790740',
'920036140',
'917202083',
'912805093',
'907219318',
'904813421',
'900048180',
'909605702',
'900047049',
'917265497',
'900007334',
'900012768',
'909726381',
'918825172',
'915588835',
'906100902',
'900000067',
'917943538',
'907874466',
'903503086',
'909165340',
'904495610',
'918799380',
'900040289',
'912666227',
'918112161',
'900018033',
'902788619',
'902851305',
'909186426',
'900032450',
'913867583',
'910624473',
'911546290',
'911257651',
'900007191',
'913676925',
'918826147',
'903183312',
'916393249',
'913733683',
'910717267',
'908358092',
'913827400',
'915772668',
'909918170',
'900047348',
'900033958',
'906090853',
'920008216',
'913869325',
'917188264',
'908144957',
'916500733',
'917935270',
'900003382',
'913147708',
'900015602',
'912370711',
'917929979',
'911985053',
'907744427',
'916472354',
'900014835',
'917219555',
'900034179',
'900044579',
'900007074',
'900026717',
'907525650',
'913767431',
'909264075',
'910647353',
'911398571',
'900038963',
'900008855',
'902135590',
'918118557',
'909169357',
'900040406',
'900040679',
'907570981',
'918831178',
'900007568',
'900019775',
'913765676',
'905608228',
'900011507',
'905362125',
'908329713',
'918827967',
'915726453',
'917176798',
'908469177',
'912170784',
'910471008',
'900008933',
'913700312',
'909164521',
'909405736',
'900041056',
'903077427',
'911377251',
'918806881',
'900508445',
'915741858',
'913403184',
'908864988',
'918827291',
'900036259',
'910497424',
'908491758',
'910600371',
'912122307',
'900068746',
'909005375',
'918821649',
'917281357',
'903366833',
'900026171',
'918830658',
'918831165',
'908449534',
'918828448',
'900011130',
'900036350',
'900009180',
'912953748',
'901801828',
'900016837',
'900019359',
'913696087',
'900035999',
'916757548',
'907521178',
'918120754',
'900040081',
'900018566',
'911332895',
'902172744',
'909809243',
'918823066',
'916466569',
'900001770',
'917174367',
'917243228',
'900561537',
'917254239',
'918828552',
'900036558',
'908518096',
'900011468',
'916483989',
'900011494',
'915120887',
'900029408',
'900006359',
'920015769',
'900038482',
'900599042',
'908492018',
'913773593',
'906993131',
'915004069',
'907609071',
'915606346',
'916719991',
'900059165',
'900027965',
'917242461',
'907563337',
'900481392',
'900041407',
'908697925',
'910207199',
'920031629',
'913728548',
'900832847',
'909905144',
'918117322',
'907588180',
'900011897',
'900023142',
'910911864',
'913725636',
'918826446',
'904983682',
'909169266',
'918830996',
'917187796',
'918156257',
'913869481',
'903207934',
'909046117',
'918111472',
'903141036',
'917928887',
'911529962',
'915565799',
'910630635',
'911054903',
'913020984',
'907502640',
'913864749',
'909145814',
'900680604',
'909272291',
'900003590',
'917242123',
'907268276',
'917265432',
'900029954',
'900054862',
'912596352',
'917929654',
'900038781',
'916437111',
'918544710',
'910631415',
'906177095',
'900012222',
'916406522',
'909169032',
'916429441',
'906310449',
'918360760',
'918828357',
'904535338',
'900014848',
'917242240',
'901219428',
'918121144',
'900048206',
'909201389',
'917916511',
'909942597',
'900008712',
'900014419',
'918804060',
'909169006',
'908278675',
'917271477',
'900028706',
'915769509',
'908481046',
'908762977',
'900037364',
'902135369',
'910606845',
'918829280',
'911449271',
'917046226',
'917925988',
'913714872',
'917924298',
'912456641',
'900039106',
'900008439',
'917254148',
'901533235',
'912790741',
'918766789',
'918068923',
'918101852',
'912150426',
'915618683',
'900027042',
'912560134',
'918103126',
'901982645',
'910934029',
'918799055',
'909303244',
'907162820',
'918635320',
'909169084',
'900016707',
'900029018',
'900043409',
'918831087',
'908629766',
'917243813',
'917201238',
'917262741',
'917945592',
'903922648',
'909766681',
'910188986',
'909802743',
'902155623',
'917172053',
'900030214',
'902221312',
'903142323',
'911075040',
'917166346',
'916496924',
'902541359',
'906926610',
'910642842',
'903585909',
'900019489',
'900036844',
'913784201',
'917248987',
'918799016',
'908377085',
'918831620',
'913869650',
'912513516',
'909160647',
'916392131',
'900003421',
'909904351',
'900000431',
'902810407',
'900016265',
'916472718',
'918828214',
'907571683',
'900025586',
'905267212',
'917922556',
'902770549',
'906993222',
'918803891',
'902076609',
'906475341',
'906445246',
'909901751',
'905137290',
'910995246',
'916481584',
'907825105',
'917966587',
'916349023',
'913869793',
'911617816',
'917187237',
'918115853',
'910766433',
'900004526',
'918831269',
'912265632',
'900043110',
'901612496',
'908362070',
'910558706',
'911808149',
'908632795',
'900035609',
'908101043',
'915592020',
'900000340',
'909049198',
'918826602',
'903185119',
'911049495',
'900030747',
'910125923',
'905017170',
'904873039',
'918821532',
'913583650',
'909209033',
'915579345',
'917301650',
'915973739',
'915591253',
'900130093',
'910928491',
'918828539',
'900004760',
'900034166',
'918074565',
'917211209',
'916502085',
'917246322',
'900036623',
'900005410',
'900006047',
'900012001',
'900042291',
'902365599',
'902746876',
'902112255',
'913766352',
'900022973',
'917275299',
'915600665',
'911357738',
'907303662',
'917286115',
'900011403',
'900050325',
'910161881',
'916542203',
'900016772',
'916516424',
'912454730',
'915721890',
'900038989',
'900009492',
'900038716',
'918806634',
'912978890',
'909910032',
'900003837',
'918825783',
'912808369',
'913774100',
'900013990',
'900195249',
'900019281',
'900028719',
'911135217',
'916852123',
'912659701',
'916479426',
'900024845',
'917240758',
'918119675',
'900033074',
'900021361',
'908494020',
'918826082',
'900800191',
'909428889',
'909837804',
'901744121',
'903691300',
'900856403',
'917242929',
'900004630',
'912971571',
'909182786',
'907897710',
'918069534',
'917241564',
'907609006',
'917934542',
'900033022',
'907608928',
'900054043',
'915570440',
'915484094',
'906629885',
'908516510',
'912991357',
'917262923',
'912159942',
'918827811',
'918831282',
'906145388',
'912160150',
'907566626',
'905535961',
'906269434',
'913672804',
'900032099',
'900044124',
'900036779',
'900012937',
'912799737',
'900047621',
'900026054',
'902580047',
'918121638',
'918828721',
'900020100',
'900014120',
'913839282',
'918830879',
'905547440',
'913683958',
'917302391',
'918830307',
'917175082',
'900019268',
'917215200',
'916772758',
'902501839',
'904731404',
'912159526',
'904440672',
'918829241',
'909826143',
'900011715',
'903957514',
'912160111',
'916449344',
'917921529',
'911414756',
'912311353',
'913062246',
'901316044',
'903818388',
'916435447',
'913781991',
'918831412',
'912960638',
'900050104',
'913295089',
'912823176',
'900031410',
'917926690',
'911835943',
'918360487',
'912150452',
'900031995',
'913414208',
'907469061',
'900043123',
'918827590',
'909819539',
'911980737',
'912411063',
'916491672',
'910624018',
'916860222',
'907308160',
'904506257',
'900580361',
'913870157',
'912925837',
'900021088',
'900915527',
'916454999',
'900025456',
'910477495',
'915557453',
'916023841',
'906487509',
'908533956',
'900014523',
'900014601',
'902972933',
'916502787',
'900012521',
'917897011',
'908510621',
'900006229',
'913731434',
'900016551',
'900003993',
'912148424',
'900008387',
'900036220',
'910419125',
'902694083',
'910980114',
'900012911',
'900036701',
'918119389',
'917243202',
'900602188',
'900017747',
'905710733',
'903473914',
'912382346',
'907547997',
'901118496',
'918829098',
'918118102',
'908494384',
'900010415',
'917245139',
'913869390',
'907597033',
'912957245',
'915601601',
'917241317',
'918113851',
'918831035',
'917169388',
'917242331',
'907273866',
'900018228',
'913764116',
'904585453',
'900006710',
'918830580',
'905434418',
'900039860',
'911238515',
'918827135',
'903478763',
'909851649',
'916502410',
'913784162',
'909812194',
'913781094',
'902110786',
'916491685',
'912893961',
'900367278',
'905596684',
'910975967',
'900208977',
'900014341',
'912174801',
'901405952',
'906992260',
'900010051',
'907062915',
'900821212',
'900033360',
'900047140',
'900035804',
'906129697',
'917940119',
'900423464',
'900040822',
'918824847',
'913766508',
'910586656',
'915619359',
'918828032',
'900011273',
'909174375',
'915913081',
'900022102',
'900002537',
'918819582',
'900021829',
'908492148',
'900749309',
'918499535',
'900020516',
'918041584',
'900021868',
'918830866',
'918156907',
'900010064',
'911369841',
'917403284',
'917208713',
'918121014',
'900695216',
'918828630',
'900008257',
'915589680',
'918112434',
'917915133',
'903084265',
'903505439',
'918831737',
'917260245',
'913579022',
'904119858',
'907608824',
'900004682',
'917226549',
'918116685',
'911552647',
'918108781',
'918103178',
'900006463',
'918668509',
'916483521',
'900763336',
'918825978',
'918061032',
'900049025',
'900011208',
'907536310',
'916397110',
'901706681',
'900028355',
'900017110',
'916431495',
'917177058',
'907041673',
'900052093',
'900050832',
'908384456',
'900006437',
'900022869',
'900030955',
'912226892',
'916487005',
'900025404',
'915620737',
'900035284',
'908778356',
'911734972',
'910626670',
'902248859',
'909933848',
'910718879',
'900180741',
'913686545',
'901107147',
'900033750',
'918828669',
'900789895',
'906003571',
'900016486',
'913664458',
'912986183',
'902969189',
'900038079',
'917936635',
'900982399',
'900049597',
'901196912',
'910491158',
'900018150',
'907607212',
'909889921',
'917212522',
'901759838',
'918828305',
'904828462',
'900041381',
'918108794',
'915515606',
'917922413',
'900046659',
'900019463',
'916544296',
'917259491',
'909301957',
'900010948',
'913847407',
'907487794',
'918831204',
'909937774',
'912960625',
'900001484',
'918114800',
'913861356',
'900414468',
'917240251',
'905958448',
'916402466',
'907981664',
'900037195',
'911557288',
'910631935',
'908519578',
'907444010',
'903880216',
'917403531',
'900001432',
'900007529',
'900031605',
'918160937',
'911982440',
'902829829',
'917257957',
'907529953',
'918829436',
'913769173',
'917171117',
'907490082',
'908507748',
'900060920',
'900034608',
'917164786',
'918820661',
'903215188',
'900027432',
'909890805',
'915600015',
'918827954',
'916432912',
'912601097',
'900025534',
'910486387',
'912132629',
'900010376',
'909186933',
'905072888',
'904100410',
'908868147',
'903480466',
'900031384',
'918110250',
'912188334',
'904218463',
'900036714',
'900044488',
'908492083',
'907438056',
'918809052',
'900055148',
'917236923',
'918825458',
'900000951',
'900016746',
'904959762',
'918830593',
'917240238',
'918830736',
'902444262',
'912071555',
'913773112',
'907608850',
'915590525',
'909136948',
'901337260',
'905348267',
'920005915',
'900003889',
'910259082',
'902282490',
'912980515',
'917174978',
'904135419',
'918103152',
'903407003',
'916411579',
'900022453',
'910407178',
'918829176',
'915024284',
'909599644',
'918831607',
'911983363',
'917191904',
'904565849',
'909014189',
'900033984',
'916474577',
'901502477',
'913854765',
'917323802',
'905086460',
'907491356',
'913679486',
'909182747',
'900030500',
'912132486',
'909802821',
'916498458',
'900030656',
'910631181',
'908492109',
'907585580',
'900028667',
'916474135',
'911403264',
'909156708',
'904239211',
'912842793',
'920003042',
'909866469',
'910598694',
'900008959',
'900016915',
'900046269',
'900023727',
'900008478',
'902717769',
'918116048',
'900046958',
'917922517',
'916409200',
'908492096',
'900049987',
'909251023',
'900388260',
'918103971',
'917918097',
'900033373',
'912364107',
'907184049',
'900014679',
'902086593',
'917187250',
'906992832',
'909074093',
'903179087',
'900008868',
'901973987',
'909092852',
'901042342',
'913867531',
'901442430',
'910603959',
'915602862',
'916412606',
'903716598',
'900044228',
'916405287',
'918825757',
'910481018',
'910711664',
'904054026',
'902136201',
'908491914',
'912333934',
'917097888',
'917181127',
'900023064',
'900001679',
'909289854',
'918827564',
'916436448',
'900002173',
'900018046',
'908504810',
'909129525',
'905736343',
'905494738',
'910569236',
'904779192',
'900010142',
'907586776',
'916451931',
'900014094',
'912028616',
'918828175',
'901727858',
'906999384',
'900015368',
'900879998',
'913730329',
'907097365',
'900020828',
'913708476',
'900003759',
'916540630',
'918119987',
'905538964',
'912162217',
'910592623',
'916443169',
'918827746',
'903036984',
'918830606',
'913869494',
'913814933',
'909065799',
'901040665',
'917919345',
'918825510',
'913048531',
'916405079',
'909185074',
'903548820',
'900045593',
'900034348',
'900016967',
'900026574',
'908675968',
'903114854',
'918830138',
'900014445',
'900001614',
'900006957',
'918830814',
'900010610',
'900003226',
'911574331',
'917197624',
'900007373',
'907896046',
'917947516',
'918119142',
'912159565',
'917945085',
'900047699',
'918827200',
'917187913',
'900096826',
'917177708',
'903162642',
'902122915',
'909043101',
'916388842',
'900014627',
'917241304',
'900008322',
'913058684',
'918652948',
'910158085',
'913870313',
'912499658',
'912811801',
'917092259',
'909169370',
'900003096',
'900021621',
'913765338',
'917933151',
'900042850',
'906992949',
'901462866',
'908543108',
'909198100',
'917169505',
'918830762',
'915390598',
'913867609',
'907881720',
'900032762',
'918110224',
'918827980',
'918831243',
'903879319',
'900050494',
'900011156',
'905472677',
'917189525',
'900035518',
'909287852',
'900021270',
'900040198',
'917384863',
'911629217',
'900005462',
'906244903',
'912138999',
'904787460',
'904176213',
'918803774',
'900005176',
'917926573',
'913748971',
'900064287',
'918121729',
'909902050',
'901946817',
'908606938',
'910484411',
'900052496',
'918672968',
'900028693',
'918826615',
'908450496',
'918111446',
'909771790',
'907551312',
'912014485',
'913402963',
'916402024',
'909896382',
'900041433',
'918112343',
'918114423',
'909760896',
'900046828',
'903146106',
'913773528',
'900008049',
'918119662',
'900018007',
'918827993',
'907880758',
'918830281',
'917929017',
'900011065',
'907487079',
'900004513',
'908379035',
'917972905',
'900013652',
'910662641',
'900005930',
'916494103',
'912158941',
'900013457',
'900013522',
'913824124',
'918826498',
'900011936',
'910541819',
'908899386',
'900026665',
'900002901',
'900032060',
'918810820',
'908492044',
'910632078',
'901718056',
'917524470',
'900032346',
'908390527',
'908491875',
'900002654',
'918828773',
'900006190',
'900011819',
'917928861',
'916471327',
'901130898',
'917246309',
'902289562',
'900017162',
'907606965',
'917235545',
'900041667',
'913759800',
'900050091',
'903489982',
'909802080',
'909158073',
'907938556',
'900000821',
'916843075',
'918161782',
'905377413',
'902354978',
'913869507',
'901691081',
'918826706',
'908491849',
'913477401',
'901460331',
'910416395',
'900039808',
'917904954',
'911900215',
'918766776',
'903041027',
'900027523',
'907608915',
'917951715',
'917927366',
'918064061',
'915034593',
'904893436',
'902269282',
'900009323',
'913678836',
'904393911',
'910631155',
'900013600',
'917967471',
'910506602',
'913008127',
'900052054',
'905256890',
'913477349',
'909743619',
'912812308',
'906170348',
'905711916',
'900044163',
'901218128',
'913669190',
'917217670',
'917241928',
'918827642',
'904083354',
'917169609',
'911397466',
'900009362',
'908459817',
'911582664',
'911264879',
'918828318',
'913701092',
'911411363',
'916530412',
'900570611',
'918827798',
'918827187',
'913826126',
'917935647',
'910797490',
'903635400',
'918831490',
'918156673',
'913027653',
'918109808',
'900038430',
'907640297',
'900023675',
'918823170',
'907486468',
'918827304',
'900939291',
'917955082',
'900004500',
'917254174',
'900033932',
'917346552',
'913828856',
'917953236',
'900015056',
'918827317',
'916543789',
'918672851',
'917206503',
'903886911',
'904825602',
'900016642',
'909892586',
'913305294',
'900002797',
'908912633',
'917253134',
'918123003',
'900008179',
'900034829',
'900016161',
'907622929',
'917265614',
'909291284',
'900006567',
'900939772',
'918831334',
'913338522',
'918827720',
'910506160',
'901886575',
'903704040',
'916479452',
'900006450',
'913299444',
'918118128',
'912836683',
'917923492',
];
}
